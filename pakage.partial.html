<meta charset="UTF-8" />

<div class="max-w-[1500px] mx-auto bg-white rounded shadow p-2 flex flex-col sm:flex-row gap-2">
  <div class="flex-1 bg-white rounded p-2 space-y-4 shadow">
    <div class="bg-gray-100 p-2 font-sans text-sm">
      <div class="bg-white p-4 rounded-xl shadow-md space-y-4">
        <h1 class="text-2xl font-bold text-gray-800 mb-4">📦 각종 패키지 구성</h1>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <!-- 패키지 요일구성 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">📅 패키지등장 요일</summary>
            <section>
              <h3 class="font-semibold text-blue-600 mb-1">🔹 커스텀 패키지</h3>
              <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                <li>불의수정 : 월 ~ 수 [2주텀]</li>
                <li>영웅장비 : 목 ~ 금 [매 주]</li>
                <li>영주보석 : 일 ~ 월 [2주텀]</li>
              </ul>
            </section>
            <section>
              <h3 class="font-semibold text-blue-600 mb-1">🔹 장인의 보물창고</h3>
              <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                <li>영주보석 : 수 ~ 목 [매 주]</li>
                <li>영주장비 : 금 ~ 일 [매 주]</li>
              </ul>
            </section>
            <section>
              <h3 class="font-semibold text-blue-600 mb-1">🔹 희망시장</h3>
              <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                <li>불의수정 : 금 ~ 일 [2주텀]</li>
              </ul>
            </section>
            <section>
              <h3 class="font-semibold text-blue-600 mb-1">🔹 최강영주 기간 패키지</h3>
              <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                <li>불의수정 : 월 ~ 토 [2주텀]</li>
                <li>스태미너 : 화 ~ 수 [2주텀]</li>
                <li>부대훈련 : 수 ~ 목 [2주텀]</li>
                <li>과학기술 : 목 ~ 금 [2주텀]</li>
                <li>공용가속 : 금 ~ 일 [2주텀]</li>
              </ul>
            </section>
          </details>

          <!-- 전용무기패키지 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🗡 전용무기 패키지</summary>
            <div id="전용무기" class="space-y-4 text-sm text-gray-800 mt-2">
              <p class="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 미스릴패키지 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">⛓ 미스릴 패키지</summary>
            <div id="미스릴" class="space-y-4 text-sm text-gray-800 mt-2">
              <p class="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
          <!-- 커스텀상자 패키지-->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">📦 커스텀상자 패키지</summary>
            <div id="커스텀상자" class="space-y-6 mt-2">
              <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 🛠️ 커스텀 무기상자 패키지 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🛠️ 커스텀 무기상자 패키지</summary>
            <div id="커스텀무기" class="space-y-6 mt-2">
              <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 💎 보석마스터 패키지 구성 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">💎 보석마스터 패키지</summary>
            <div id="보석마스터" class="space-y-4 text-sm text-gray-800 mt-2">
              <p class="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 💠 보석비전 패키지 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">💠 보석비전 패키지</summary>
            <div id="보석비전" class="mt-2">
              <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 🧰 장인의 보물창고(보석) 패키지 구성 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🧰 장인의 보물창고(보석)</summary>
            <div id="장인보물창고보석" class="mt-2">
              <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 🧰 장인의 보물창고(장비) 패키지 구성 -->
          <details class="bg-white border border-orange-300 rounded-md p-4">
            <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🧰 장인의 보물창고(장비)</summary>
            <div id="장인보물창고장비" class="mt-2">
              <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
            </div>
          </details>

          <!-- 여기에추가해야함 -->

          <!--종점-->
        </div>

        <!-- 🚄 여행자 패키지 구성 -->
        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🚄 여행자 패키지</summary>
          <div id="여행자팩" class="mt-2">
            <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
          </div>
        </details>

        <!-- 만물잡화점 -->
        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🛒 만물잡화점 [불의수정]</summary>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <div class="text-lg font-semibold mb-2">🔹 만물잡화점(불수) - 6세대
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center bg-white shadow">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액</th>
                      <th class="border p-1" colspan="5">구성품</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border p-1">1,500</td>
                      <td class="border p-1">불의수정 12개</td>
                      <td class="border p-1">공용가속 6h</td>
                      <td class="border p-1">마스터리석 3개</td>
                      <td class="border p-1">영웅장비상자 6개</td>
                      <td class="border p-1">100pt너트 2개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">4,400</td>
                      <td class="border p-1">불의수정 36개</td>
                      <td class="border p-1">공용가속 17h</td>
                      <td class="border p-1">마스터리석 6개</td>
                      <td class="border p-1">영웅장비상자 18개</td>
                      <td class="border p-1">100pt너트 5개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">7,500</td>
                      <td class="border p-1">불의수정 60개</td>
                      <td class="border p-1">공용가속 28h</td>
                      <td class="border p-1">마스터리석 10개</td>
                      <td class="border p-1">영웅장비상자 24개</td>
                      <td class="border p-1">100pt너트 8개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">15,000</td>
                      <td class="border p-1">불의수정 120</td>
                      <td class="border p-1">공용가속 52h</td>
                      <td class="border p-1">마스터리석 20개</td>
                      <td class="border p-1">영웅장비상자 48개</td>
                      <td class="border p-1">100pt너트 12개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">30,000</td>
                      <td class="border p-1">불의수정 240</td>
                      <td class="border p-1">공용가속 100h</td>
                      <td class="border p-1">마스터리석 30개</td>
                      <td class="border p-1">영웅장비상자 70개</td>
                      <td class="border p-1">100pt너트 20개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">79,000</td>
                      <td class="border p-1">불의수정 600</td>
                      <td class="border p-1">공용가속 240h</td>
                      <td class="border p-1">마스터리석 60개</td>
                      <td class="border p-1">영웅장비상자 140개</td>
                      <td class="border p-1">100pt너트 40개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 1200</td>
                      <td class="border p-1">공용가속 460h</td>
                      <td class="border p-1">마스터리석 100개</td>
                      <td class="border p-1">영웅장비상자 280개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 450</td>
                      <td class="border p-1">공용가속 80h</td>
                      <td class="border p-1">공용섬조각 60개</td>
                      <td class="border p-1">영웅장비상자 200개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 700</td>
                      <td class="border p-1">공용가속 80h</td>
                      <td class="border p-1">공용섬조각 40개</td>
                      <td class="border p-1">영웅장비상자 200개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="text-lg font-semibold mb-2">🔹 만물잡화점(불수) - 7세대
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center bg-white shadow">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액</th>
                      <th class="border p-1" colspan="5">구성품</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border p-1">1,500</td>
                      <td class="border p-1">불의수정 14개</td>
                      <td class="border p-1">공용가속 6h</td>
                      <td class="border p-1">마스터리석 3개</td>
                      <td class="border p-1">영웅장비상자 7개</td>
                      <td class="border p-1">100pt너트 2개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">4,400</td>
                      <td class="border p-1">불의수정 42개</td>
                      <td class="border p-1">공용가속 17h</td>
                      <td class="border p-1">마스터리석 6개</td>
                      <td class="border p-1">영웅장비상자 21개</td>
                      <td class="border p-1">100pt너트 5개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">7,500</td>
                      <td class="border p-1">불의수정 70</td>
                      <td class="border p-1">공용가속 28h</td>
                      <td class="border p-1">마스터리석 10개</td>
                      <td class="border p-1">영웅장비상자 30개</td>
                      <td class="border p-1">100pt너트 8개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">15,000</td>
                      <td class="border p-1">불의수정 140</td>
                      <td class="border p-1">공용가속 52h</td>
                      <td class="border p-1">마스터리석 20개</td>
                      <td class="border p-1">영웅장비상자 60개</td>
                      <td class="border p-1">100pt너트 12개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">30,000</td>
                      <td class="border p-1">불의수정 280</td>
                      <td class="border p-1">공용가속 100h</td>
                      <td class="border p-1">마스터리석 30개</td>
                      <td class="border p-1">영웅장비상자 90개</td>
                      <td class="border p-1">100pt너트 20개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">79,000</td>
                      <td class="border p-1">불의수정 700</td>
                      <td class="border p-1">공용가속 240h</td>
                      <td class="border p-1">마스터리석 60개</td>
                      <td class="border p-1">영웅장비상자 180개</td>
                      <td class="border p-1">100pt너트 40개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 1400</td>
                      <td class="border p-1">공용가속 460h</td>
                      <td class="border p-1">마스터리석 100개</td>
                      <td class="border p-1">영웅장비상자 360개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 450</td>
                      <td class="border p-1">공용가속 80h</td>
                      <td class="border p-1">공용섬조각 60개</td>
                      <td class="border p-1">영웅장비상자 200개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">불의수정 900</td>
                      <td class="border p-1">공용가속 80h</td>
                      <td class="border p-1">공용섬조각 40개</td>
                      <td class="border p-1">영웅장비상자 200개</td>
                      <td class="border p-1">100pt너트 60개</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </details>

        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🛒 만물잡화점 [영주장비, 보석]</summary>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <div class="text-lg font-semibold mb-2">🔹 만물잡화점(영주장비, 보석) - 6세대
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center bg-white shadow">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액</th>
                      <th class="border p-1" colspan="6">구성품</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border p-1">1,500</td>
                      <td class="border p-1">설계도면 8개</td>
                      <td class="border p-1">영주장비 재료상자 3개</td>
                      <td class="border p-1">광택제 40개</td>
                      <td class="border p-1">합금 4,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">4,400</td>
                      <td class="border p-1">설계도면 24개</td>
                      <td class="border p-1">영주장비 재료상자 9개</td>
                      <td class="border p-1">광택제 90개</td>
                      <td class="border p-1">합금 9,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">7,500</td>
                      <td class="border p-1">설계도면 35개</td>
                      <td class="border p-1">영주장비 재료상자 12개</td>
                      <td class="border p-1">광택제 140개</td>
                      <td class="border p-1">합금 14,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">15,000</td>
                      <td class="border p-1">설계도면 70개</td>
                      <td class="border p-1">영주장비 재료상자 24개</td>
                      <td class="border p-1">광택제 80개</td>
                      <td class="border p-1">합금 8,000개</td>
                      <td class="border p-1">보석도면 40개</td>
                      <td class="border p-1">보석매뉴얼 40개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">30,000</td>
                      <td class="border p-1">설계도면 140개</td>
                      <td class="border p-1">영주장비 재료상자 48개</td>
                      <td class="border p-1">광택제 100개</td>
                      <td class="border p-1">합금 10,000개</td>
                      <td class="border p-1">보석도면 50개</td>
                      <td class="border p-1">보석매뉴얼 50개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">79,000</td>
                      <td class="border p-1">설계도면 350개</td>
                      <td class="border p-1">영주장비 재료상자 120개</td>
                      <td class="border p-1">광택제 200개</td>
                      <td class="border p-1">합금 20,000개</td>
                      <td class="border p-1">보석도면 100개</td>
                      <td class="border p-1">보석매뉴얼 100개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">설계도면 700개</td>
                      <td class="border p-1">영주장비 재료상자 24개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 30,000개</td>
                      <td class="border p-1">보석도면 200개</td>
                      <td class="border p-1">보석매뉴얼 200개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">공용섬조각 60개</td>
                      <td class="border p-1">불의수정 250개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 30,000개</td>
                      <td class="border p-1">보석도면 200개</td>
                      <td class="border p-1">보석매뉴얼 200개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">공용섬조각 40개</td>
                      <td class="border p-1">불의수정 500개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 3,000개</td>
                      <td class="border p-1">보석도면 200개</td>
                      <td class="border p-1">보석매뉴얼 200개</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="text-lg font-semibold mb-2">🔹 만물잡화점(영주장비, 보석) - 7세대
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center bg-white shadow">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액</th>
                      <th class="border p-1" colspan="6">구성품</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="border p-1">1,500</td>
                      <td class="border p-1">설계도면 10개</td>
                      <td class="border p-1">영주장비 재료상자 3개</td>
                      <td class="border p-1">광택제 40개</td>
                      <td class="border p-1">합금 4,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">4,400</td>
                      <td class="border p-1">설계도면 30개</td>
                      <td class="border p-1">영주장비 재료상자 9개</td>
                      <td class="border p-1">광택제 100개</td>
                      <td class="border p-1">합금 10,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">7,500</td>
                      <td class="border p-1">설계도면 40개</td>
                      <td class="border p-1">영주장비 재료상자 12개</td>
                      <td class="border p-1">광택제 180개</td>
                      <td class="border p-1">합금 18,000개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">15,000</td>
                      <td class="border p-1">설계도면 80개</td>
                      <td class="border p-1">영주장비 재료상자 24개</td>
                      <td class="border p-1">광택제 80개</td>
                      <td class="border p-1">합금 8,000개</td>
                      <td class="border p-1">보석도면 55개</td>
                      <td class="border p-1">보석매뉴얼 55개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">30,000</td>
                      <td class="border p-1">설계도면 160개</td>
                      <td class="border p-1">영주장비 재료상자 48개</td>
                      <td class="border p-1">광택제 100개</td>
                      <td class="border p-1">합금 10,000개</td>
                      <td class="border p-1">보석도면 80개</td>
                      <td class="border p-1">보석매뉴얼 80개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">79,000</td>
                      <td class="border p-1">설계도면 400개</td>
                      <td class="border p-1">영주장비 재료상자 120개</td>
                      <td class="border p-1">광택제 200개</td>
                      <td class="border p-1">합금 20,000개</td>
                      <td class="border p-1">보석도면 140개</td>
                      <td class="border p-1">보석매뉴얼 140개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">설계도면 800개</td>
                      <td class="border p-1">영주장비 재료상자 240개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 30,000개</td>
                      <td class="border p-1">보석도면 280개</td>
                      <td class="border p-1">보석매뉴얼 280개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">공용섬조각 60개</td>
                      <td class="border p-1">불의수정 300개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 30,000개</td>
                      <td class="border p-1">보석도면 200개</td>
                      <td class="border p-1">보석매뉴얼 200개</td>
                    </tr>
                    <tr>
                      <td class="border p-1">149,000</td>
                      <td class="border p-1">공용섬조각 40개</td>
                      <td class="border p-1">불의수정 600개</td>
                      <td class="border p-1">광택제 300개</td>
                      <td class="border p-1">합금 3,000개</td>
                      <td class="border p-1">보석도면 200개</td>
                      <td class="border p-1">보석매뉴얼 200개</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </details>      

        <!-- 희망지혜 -->
        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🕵️‍ 희망지혜 </summary>
          <div id="희망지혜" class="mt-2">
            <p clase="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
          </div>
        </details>
      </div>
    </div>
  </div>
</div>

<script>
(function () {
  // ✅ 전역 1회 생성(재실행돼도 유지)
  window.__PAKAGE__ = window.__PAKAGE__ || {
    bound: false,
    loadState: {},
    fileMap: {
      용어안내: 'ward.html',
      영웅성급: '영웅성급업.html',
      제련불수: 'refinde.html',
      전용무기: '전용무기.html',
      미스릴: '미스릴.html',
      커스텀상자: 'custompakage.html',
      커스텀무기: '커스텀무기.html',
      보석마스터: 'gempakage.html',
      보석비전: 'visionpakage.html',
      장인보물창고보석: '보물창고_보석.html',
      장인보물창고장비: '보불창고_장비.html',
      여행자팩: '여행자팩.html',     // ✅ 공백 제거
      깃발해금: '깃발해금.html',     // ✅ 공백 제거
      만물잡화: '만물잡화점.html',
      연맹대작전: '연맹대작전.html',
      희망지혜: '전문가희망지혜.html'
    }
  };

  const S = window.__PAKAGE__;
  const baseUrl = 'data/';

  // ✅ loadState 초기화(없는 키만)
  for (const id of Object.keys(S.fileMap)) {
    if (S.loadState[id] === undefined) S.loadState[id] = false;
  }

  function sendHeightToParent() {
    const height = document.body.scrollHeight;
    window.parent?.postMessage({ type: "FRAME_CHANGE", height }, "*");
  }

  async function onToggle(detail) {
    // 열릴 때만 로딩/높이
    if (!detail.open) {
      setTimeout(sendHeightToParent, 150);
      return;
    }

    // 이 details 안에 있는 target만 찾아 로드
    for (const id in S.fileMap) {
      const target = detail.querySelector(`#${CSS.escape(id)}`);
      if (!target) continue;

      if (!S.loadState[id]) {
        try {
          const res = await fetch(`${baseUrl}${S.fileMap[id]}`, { cache: "no-store" });
          if (!res.ok) throw new Error('파일 요청 실패');
          target.innerHTML = await res.text();
          S.loadState[id] = true;
        } catch (e) {
          target.innerHTML = `<p class="text-red-500">⚠️ 테이블 데이터를 불러오는 데 실패했습니다.</p>`;
        }
      }
    }

    setTimeout(sendHeightToParent, 250);
  }

  // ✅ 바인딩은 1회만
  if (!S.bound) {
    S.bound = true;

    document.querySelectorAll("details").forEach(detail => {
      detail.addEventListener("toggle", () => onToggle(detail));
    });
  }

  // ✅ 재진입/재로드 시에는 바인딩을 다시 하지 말고 높이만 갱신
  setTimeout(sendHeightToParent, 50);
})();
</script>

