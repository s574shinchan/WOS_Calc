<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> ì¼ì •í‘œ </title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-2 font-sans text-sm">
  <div class="max-w-[1500px] mx-auto bg-white p-4 rounded-xl shadow-md">
    <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸ“… ì£¼ìš” ì´ë²¤íŠ¸ ì¼ì •í‘œ</h1>

    <!-- ìë™ ê³„ì‚°ëœ ì£¼ì°¨ ì•ˆë‚´-->
    <div id="currentWeekInfo" class="mb-4 text-xs text-gray-700 border rounded-lg p-3 bg-gray-50"></div>
    
    <!-- Week Blocks (ì‹¬í”Œ ì¹´ë“œí˜•) -->
    <div class="space-y-3">

      <!-- Week 1 -->
      <div id="week-1" data-week="1"
           class="week-block border border-gray-200 rounded-xl p-3 flex items-center justify-between gap-3 bg-white">
        <div class="flex flex-col gap-1">
          <div class="flex items-center gap-2">
            <span class="text-sm font-semibold text-gray-900">1ì£¼ì°¨</span>
          </div>
          <p class="text-[11px] text-gray-500">
            SVS ì¤€ë¹„ë‹¨ê³„ (ì›”~ê¸ˆ), SVS ì „ìŸë‹¨ê³„ (í† )
          </p>
        </div>

        <div class="flex flex-wrap gap-1 justify-end text-[11px]">
          <span class="px-2 py-1 rounded-full bg-red-50 text-red-700 border border-red-200">
            SVS ì¤€ë¹„ë‹¨ê³„
          </span>
          <span class="px-2 py-1 rounded-full bg-gray-50 text-gray-800 border border-gray-200">
            SVS ì „ìŸë‹¨ê³„
          </span>
        </div>
      </div>
      
      <!-- Week 2 -->
      <div id="week-2" data-week="2"
           class="week-block border border-gray-200 rounded-xl p-3 flex items-center justify-between gap-3 bg-white">
        <div class="flex flex-col gap-1">
          <div class="flex items-center gap-2">
            <span class="text-sm font-semibold text-gray-900">2ì£¼ì°¨</span>
          </div>
          <p class="text-[11px] text-gray-500">
            ì—°ë§¹ëŒ€ì‘ì „ (ì›”~í† ), ë¬´ê¸°ê³µì¥ (ì¼)
          </p>
        </div>

        <div class="flex flex-wrap gap-1 justify-end text-[11px]">
          <span class="px-2 py-1 rounded-full bg-red-50 text-red-700 border border-red-200">
            ì—°ë§¹ëŒ€ì‘ì „
          </span>
          <span class="px-2 py-1 rounded-full bg-purple-50 text-purple-700 border border-purple-200">
            ë¬´ê¸°ê³µì¥
          </span>
        </div>
      </div>

      <!-- Week 3 -->
      <div id="week-3" data-week="3"
           class="week-block border border-gray-200 rounded-xl p-3 flex items-center justify-between gap-3 bg-white">
        <div class="flex flex-col gap-1">
          <div class="flex items-center gap-2">
            <span class="text-sm font-semibold text-gray-900">3ì£¼ì°¨</span>
          </div>
          <p class="text-[11px] text-gray-500">
            ë¹™ì›ì˜ ì™• (ì›”~ê¸ˆ), ë‚´ë¶€ì†”ë¼ (í† )
          </p>
        </div>

        <div class="flex flex-wrap gap-1 justify-end text-[11px]">
          <span class="px-2 py-1 rounded-full bg-orange-50 text-orange-700 border border-orange-200">
            ë¹™ì›ì˜ ì™•
          </span>
          <span class="px-2 py-1 rounded-full bg-cyan-50 text-cyan-700 border border-cyan-200">
            ë‚´ë¶€ì†”ë¼
          </span>
        </div>
      </div>

      <!-- Week 4 -->
      <div id="week-4" data-week="4"
           class="week-block border border-gray-200 rounded-xl p-3 flex items-center justify-between gap-3 bg-white">
        <div class="flex flex-col gap-1">
          <div class="flex items-center gap-2">
            <span class="text-sm font-semibold text-gray-900">4ì£¼ì°¨</span>
          </div>
          <p class="text-[11px] text-gray-500">
            ì—°ë§¹ì´ë™ì› (ì›”~ê¸ˆ), í˜‘ê³¡ (í† ), ë¬´ê¸°ê³µì¥ (ì¼)
          </p>
        </div>

        <div class="flex flex-wrap gap-1 justify-end text-[11px]">
          <span class="px-2 py-1 rounded-full bg-blue-50 text-blue-700 border border-blue-200">
            ì—°ë§¹ì´ë™ì›
          </span>
          <span class="px-2 py-1 rounded-full bg-orange-50 text-orange-700 border border-orange-200">
            í˜‘ê³¡
          </span>
          <span class="px-2 py-1 rounded-full bg-purple-50 text-purple-700 border border-purple-200">
            ë¬´ê¸°ê³µì¥
          </span>
        </div>
      </div>
      
    </div>
  </div>

  <script>
    // â˜… ì‹œì‘ì¼ê³¼ ì‹œì‘ ì£¼ì°¨ë¥¼ ë„¤ê°€ ì§€ì •í•˜ëŠ” ë¶€ë¶„
    const START_DATE = new Date(2025, 11,01);  // (ì—°,ì›”-1,ì¼)
    const START_WEEK = 1;                       // 1~4    
    const dayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];

    // íŠ¹ì • ì£¼ì°¨ì˜ ì‹œì‘/ë ë‚ ì§œ ê³„ì‚° (weekIndex: 0~3)
    function getWeekRange(weekIndex) {
      const start = new Date(START_DATE);
      start.setDate(start.getDate() + weekIndex * 7);
      const end = new Date(start);
      end.setDate(start.getDate() + 6);
      return { start, end };
    }

    // ë‚ ì§œ í¬ë§· â†’ "11/10 (ì›”)"
    function formatDate(d) {
      const mm = (d.getMonth() + 1).toString().padStart(2, "0");
      const dd = d.getDate().toString().padStart(2, "0");
      const day = dayNames[d.getDay()];
      return `${mm}/${dd} (${day})`;
    }

    // ===============================
    //   í˜„ì¬ ì£¼ì°¨ ìë™ ê³„ì‚°
    // ===============================
    function applyDynamicWeek() {

      const today = new Date();
      const msWeek = 7 * 24 * 60 * 60 * 1000;
      const diffWeeks = Math.floor((today - START_DATE) / msWeek);
      const currentWeek = ((START_WEEK - 1 + diffWeeks) % 4) + 1;

      // ì•ˆë‚´ ë°•ìŠ¤ ì¶œë ¥
      document.getElementById("currentWeekInfo").innerHTML =
        `ì˜¤ëŠ˜ ë‚ ì§œ: <b>${today.toISOString().slice(0,10)}</b><br>
         í˜„ì¬ ìë™ ê³„ì‚°ëœ ì£¼ì°¨: <b style="color:#0074ff">${currentWeek}ì£¼ì°¨</b><br>
         SVSì„œë²„ì „ì´ ì‹œì‘ë˜ëŠ” ì›”ìš”ì¼ì˜ í•´ë‹¹ ì£¼ë¥¼ 1ì£¼ì°¨ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.`;

      // ì£¼ì°¨ ê°•ì¡° + "í˜„ì¬ ì£¼" ë±ƒì§€ ì¶”ê°€
      document.querySelectorAll(".week-block").forEach(el => {
        const w = Number(el.dataset.week);
        el.classList.remove("bg-sky-50", "ring-2", "ring-sky-400");
        const existingBadge = el.querySelector(".current-week-badge");
        if (existingBadge) existingBadge.remove();

        if (w === currentWeek) {
          el.classList.add("bg-sky-50", "ring-2", "ring-sky-400");
          const badge = document.createElement("span");
          badge.textContent = "í˜„ì¬ ì£¼";
          badge.className =
            "current-week-badge ml-2 px-2 py-0.5 rounded-full bg-sky-600 text-white text-[10px] font-semibold";
          const titleRow = el.querySelector("div > div.flex.items-center.gap-2");
          if (titleRow) titleRow.appendChild(badge);
        }
      });

      // ê° ì£¼ì— ë‚ ì§œ ë²”ìœ„ ë„£ê¸°
      insertWeekRanges();
    }

    // ===============================
    //   ê° ì£¼ ì œëª© ì˜†ì— (ì‹œì‘ì¼ ~ ì¢…ë£Œì¼) í‘œì‹œ
    // ===============================
    function insertWeekRanges() {
      for (let week = 1; week <= 4; week++) {
        const span = document.querySelector(`[data-week-range="${week}"]`);
        if (!span) continue;

        const { start, end } = getWeekRange(week - 1);
        span.textContent = `(${formatDate(start)} ~ ${formatDate(end)})`;
      }
    }

    // ===============================
    //   ë¡œë“œ ì‹œ ì‹¤í–‰
    // ===============================
    window.addEventListener("load", () => {
      applyDynamicWeek();
      setTimeout(() => {
        if (window.parent) {
          window.parent.postMessage({
            type: "FRAME_CHANGE",
            height: document.body.scrollHeight
          }, "*");
        }
      }, 80);
    });
  </script>
</body>
</html>
