<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <meta name="description" content="Whiteout Survival Calculatorï¼†Data Collection">
  <meta name="google-adsense-account" content="ca-pub-8205102847358210">
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Whiteout Survival Calculatorï¼†Data Collection" />
  <meta property="og:description" content="A list has been compiled to help you craft the materials you need while playing WOS." />
  <meta property="og:url" content="https://d1xsb5o91gjadf.cloudfront.net/" />
  <meta property="og:image" content="https://raw.githubusercontent.com/s574shinchan/WOS_Calc/e66ed083ba7662f678ff42bcb3d0ee2b03ad3169/images/og-image.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Whiteout Survival Calculatorï¼†Data Collection" />
  <meta name="twitter:description" content="A list has been compiled to help you craft the materials you need while playing WOS." />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/s574shinchan/WOS_Calc/e66ed083ba7662f678ff42bcb3d0ee2b03ad3169/images/og-image.png" />
  <link rel="canonical" href="https://d1xsb5o91gjadf.cloudfront.net/" />
  <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  <title>Whiteout Survival Calculatorï¼†Data Collection</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg1:#003a88;
      --bg2:#6c85bd;
      --nav:#0a1634cc;
      --muted:#b9c7ff;
      --panel:#101c36f2;
      --panel2:#0f1a33f2;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --r:14px;
    }
    *{box-sizing:border-box}
    
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;      
      background:
        radial-gradient(900px 420px at 25% 0%, #1a2f6a 0%, transparent 60%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      min-height:100vh;
    }
    
    /* âœ… ë‹¤í¬ëª¨ë“œ ì „ìš© */
    body.dark-mode {
      background-image: none;
      background-color: #121212;
      color: #f0f0f0;
    }
    
    .dark-mode .bg-white { background-color: #2c2c2c !important; color: #f0f0f0 !important; }
    
    .dark-mode .bg-blue-300,
    .dark-mode .bg-gray-100 { background-color: #1e1e1e !important; }
  
    .dark-mode .text-gray-800,
    .dark-mode .text-gray-700,
    .dark-mode .text-gray-600 { color: #f0f0f0 !important; }
  
    .dark-mode .text-blue-700 { color: #66b0ff !important; }
    .dark-mode .text-blue-600 { color: #80caff !important; }
    .dark-mode .text-orange-500 { color: #ffa94d !important; }
    .dark-mode .text-green-600 { color: #79e68c !important; }
    .dark-mode .text-red-500 { color: #ff8080 !important; }
  
    .dark-mode table { background-color: #2c2c2c; color: #f0f0f0; }
    .dark-mode th, .dark-mode td { border-color: #444 !important; }
    .dark-mode thead th { color: #000 !important; }
    
    .dark-mode .bg-blue-100,
    .dark-mode .bg-blue-50,
    .dark-mode .bg-amber-100,
    .dark-mode .bg-orange-50,
    .dark-mode .bg-red-50,
    .dark-mode .bg-indigo-100 { background-color: #3a3a3a !important; color: #f0f0f0 !important; }
    
    .dark-mode .bg-amber-50,
    .dark-mode .bg-indigo-50 { background-color: #2d2d2d !important; }
    .dark-mode summary { background-color: #333 !important; color: #f0f0f0 !important; }
    .dark-mode ul li { color: #ddd; }
    .dark-mode .text-gray-500 { color: #9ca3af !important; }
    .dark-mode .card { background:#1f1f1f; border-color:#2a2a2a; }
    
    .dark-mode * { text-shadow: none !important; }
    /* ë‹¤í¬ëª¨ë“œì¼ ë•Œ ì•„ì´ì½˜ */
    .dark-mode #DarkMode { color: #facc15; /* ë…¸ë€ìƒ‰ (ë‹¬ ì•„ì´ì½˜ ê°•ì¡°) */ }
    
    .dark-mode #langSelectPC,
    .dark-mode #langSelectPC option,
    .dark-mode #langSelectPC:disabled {
      color: #f0f0f0 !important;
      background-color: #2c2c2c !important;
    }
    /* ë‹¤í¬ëª¨ë“œì—ì„œ íŒì—… í…Œì´ë¸” í—¤ë” ê¸€ììƒ‰ì„ ê²€ì •ìœ¼ë¡œ */
    body.dark-mode #popupContent th { color:#f0f0f0 !important; }
    
    /* ë‹¤í¬ëª¨ë“œì—ì„œ ì´í•©/ë³´ìœ ëŸ‰/ê³¼ë¶€ì¡± í–‰ ê¸€ììƒ‰ì„ ê²€ì •ìœ¼ë¡œ */
    body.dark-mode #popupContent tr.row-total  td,
    body.dark-mode #popupContent tr.row-owned  td,
    body.dark-mode #popupContent tr.row-deficit td { color:#f0f0f0 !important; }
    
    .topbar{
      color: #e8efff;
      position: sticky; top:0; z-index:50;
      padding: 18px 8px;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, var(--nav), transparent);
      border-bottom: 1px solid rgba(255,255,255,0.15);
    }
    .nav{
      max-width: none;
      margin-left: 0;
      padding-left: 8px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-size: 1.6rem;
      font-weight: 900;
      letter-spacing: .2px;
      margin-right: 8px;
      user-select:none;
      white-space:nowrap;
    }
    .logo{
      width:34px; height:34px; border-radius: 12px;
      background: linear-gradient(135deg, #5fb3ff, #2a4fff);
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
    }
    .navlist{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-left: auto;
      padding-right: 8px;
    }
    .dd{ position: relative; }
    .dd-btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 14px;
      border-radius: 14px;
      border: 1px solid transparent;
      color: #e8efff;
      background: transparent;
      cursor:pointer;
      user-select:none;
      font-weight: 800;
      letter-spacing: .1px;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      outline: none;
      white-space:nowrap;
    }
    .dd-btn:hover{
      background: rgba(255,255,255,.07);
      transform: translateY(-1px);
    }
    .dd-btn:focus-visible{
      border-color: rgba(120,170,255,.65);
      box-shadow: 0 0 0 3px rgba(80,140,255,.25);
    }
    .dd.open .dd-btn{
      background: rgba(255,255,255,.09);
      border-color: rgba(120,170,255,.25);
    }
    .chev{
      width: 10px; height: 10px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(45deg);
      margin-top: -2px;
      transition: transform .12s ease;
    }
    .dd.open .chev{
      transform: rotate(225deg);
      margin-top: 2px;
    }
    .dd-menu{
      position:absolute;
      top: calc(100% + 10px);
      left: 0;
      min-width: 220px;
      padding: 10px;
      border-radius: var(--r);
      display:none;
      
      /* âœ… í•˜ìœ„ë©”ë‰´ ë°°ê²½/í…Œë‘ë¦¬/ê·¸ë¦¼ì */
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
    }
    .dd.open .dd-menu{ display:block; }
    .dd-item{
      display:block;
      padding: 12px 12px;
      border-radius: 12px;
      color: #e8efff;
      text-decoration:none;
      font-weight: 800;
      transition: background .12s ease;
    }
    .dd-item:hover, .dd-item:focus-visible{
      background: rgba(255,255,255,.07);
      outline: none;
    }
    
    .dd-item.active{
      background: rgba(255,255,255,.10);
      color: #57a8ff; /* íŒŒë€ ê¸€ì */
    }
    .dd-item.active::before{
      content:"";
      position:absolute;
      left: 6px;               /* ë¼ì¸ ìœ„ì¹˜ */
      top: 8px;
      bottom: 8px;
      width: 3px;
      border-radius: 999px;
      background: #57a8ff;     /* íŒŒë€ ë¼ì¸ */
    }
    
    .content{
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 18px;
      color: rgba(232,239,255,.85);
      line-height: 1.6;
    }
    .card { 
      border:1px solid rgba(0,0,0,.1); 
      background:#fff; 
      box-shadow:0 2px 8px rgba(0,0,0,.06); 
      padding:10px 10px; 
    }

    /* âœ… í•œ ì¤„ ìœ ì§€ + ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© */
    .row{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:nowrap;         /* ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
      white-space:nowrap;       /* í…ìŠ¤íŠ¸ë„ ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
      overflow-x:auto;          /* ë„˜ì¹˜ë©´ ê°€ë¡œ ìŠ¤í¬ë¡¤ */
      -webkit-overflow-scrolling: touch;
    }
    #hero-shard-strip{
      display:flex;
      align-items:center;
      flex-wrap:nowrap;         /* ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
      flex:0 0 auto;            /* ì¤„ì„œê¸° ê³ ì • */
    }
    #hero-shard-strip img{
      width:32px; height:32px; object-fit:contain;
      flex:0 0 auto;            /* ì•„ì´ì½˜ ìì²´ë„ ì¤„ë°”ê¿ˆ ë°©ì§€ */
    }
    .dark-mode .input { width:110px; height:34px; border:1px solid #d0d5dd; border-radius:8px; padding:0 10px; outline:none; color: #121212; }
    .input { width:110px; height:34px; border:1px solid #d0d5dd; border-radius:8px; padding:0 10px; outline:none; }
    .btn   { height:34px; padding:0 14px; border:0; border-radius:8px; background:#2563eb; color:#fff; cursor:pointer; flex:0 0 auto; }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="nav">
      <div class="brand">
        <div class="text-center mb-4 mt-6 sm:mt-4">
          <img src="images/logo.png" alt="logo"
               class="mx-auto w-24 drop-shadow-lg cursor-pointer"/></div>
        <span>Calculatorï¼†Data Collection</span>
      </div>

      <!-- Support Badge + Toast Wrapper -->
      <div class="relative absolute">
        <!-- Support Badge -->
        <div class="inline-flex items-center gap-2 bg-slate-600 text-white text-xs px-3 py-1.5 rounded-full shadow">
          <span class="opacity-80"> Support :</span>
          <span id="supportNumber" class="font-bold tracking-wide">67331703</span>

          <!-- ë³µì‚¬ ë²„íŠ¼ -->
          <button id="copyBtn"
                  onclick="copySupportNumber()"
                  class="ml-1 bg-slate-700 hover:bg-slate-600 text-white p-1.5 rounded-md transition flex items-center">

            <!-- ì±… ì•„ì´ì½˜ -->
            <svg id="iconBook" xmlns="http://www.w3.org/2000/svg"
                 class="w-3.5 h-3.5"
                 fill="none" viewBox="0 0 24 24"
                 stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
              <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
              <path d="M3 6l0 13" />
              <path d="M12 6l0 13" />
              <path d="M21 6l0 13" />
            </svg>

            <!-- ì²´í¬ ì•„ì´ì½˜ -->
            <svg id="iconCheck" xmlns="http://www.w3.org/2000/svg"
                 class="w-3.5 h-3.5 hidden"
                 fill="none" viewBox="0 0 24 24"
                 stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M5 13l4 4L19 7" />
            </svg>
          </button>
        </div>

        <!-- â˜… Support ì•„ë˜ í‘œì‹œë˜ëŠ” Toast -->
        <div id="toast"
             class="absolute left-1/2 top-[110%] transform -translate-x-1/2
                    bg-emerald-500 text-white text-xs font-semibold
                    px-3 py-2 rounded-lg shadow-lg
                    opacity-0 pointer-events-none whitespace-nowrap
                    transition-opacity duration-300">
          User ID Copied.
        </div>
      </div>
      
      <div class="navlist">
        <div class="dd" data-dd>
          <button onclick="ReturnHome()"
                  class="dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">Home</button>
        </div>
        <div class="dd" data-dd>
          <button class="dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Chief <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="dd-menu" role="menu">
            <a class="dd-item" href="#" data-frame="equip_EN.html">Chief Gear</a>
            <a class="dd-item" href="#" data-frame="gem_EN.html">Chief Charm</a>
          </div>
        </div>        
        <div class="dd" data-dd>
          <button class="dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Heroes <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="dd-menu" role="menu">
            <a class="dd-item" href="#" data-frame="hero_EN.html">Hero</a>
            <a class="dd-item" href="#" data-frame="experts_EN.html">Expert</a>
          </div>
        </div>
        <div class="dd" data-dd>
          <button class="dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Development <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="dd-menu" role="menu">
            <a class="dd-item" href="#" data-frame="buildingchoice_EN.html">Building</a>
            <a class="dd-item" href="#" data-frame="helios_EN.html">Helios</a>
            <a class="dd-item" href="#" data-frame="pet_EN.html">Pet</a>
            <a class="dd-item" href="#" data-frame="troop_EN.html">Training</a>
            <a class="dd-item" href="#" data-frame="SVS_PreMission_EN.html">SVS Mission</a>
            <a class="dd-item" href="#" data-frame="transfer_EN.html">State Transfer</a>
            <a class="dd-item" href="#" data-frame="schedule_EN.html">Schedule</a>
          </div>
        </div>
        <div class="dd" data-dd>
          <button id="DarkMode"
                  onclick="ActiveDarkMode()">
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="w-7 h-7"
                 viewBox="0 0 24 24"
                 fill="none"
                 stroke="currentColor"
                 stroke-width="2"
                 >
              <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
            </svg>            
          </button>
        </div>
        <select id="langSelectPC" class="p-1 border border-gray-300 px-3 py-2 rounded text-sm text-gray-800">
          <option value="index.html">ğŸŒ Language</option>
          <option value="index.html">ğŸ‡°ğŸ‡· Koreanã€€</option>
          <option value="index_EN.html" selected>ğŸ‡ºğŸ‡¸ English</option>          
          <option value="index_JP.html">ğŸ‡¯ğŸ‡µ Japanese</option>  
        </select>
      </div>  
    </div>
  </div>

  <div class="max-w-[1500px] mx-auto bg-white rounded shadow p-2 flex flex-col sm:flex-row gap-2">
    <!-- guideDetails: ì²˜ìŒì—ë§Œ í‘œì‹œë¨ -->
    <div id="guideDetails" class="flex-1 bg-white rounded p-2 space-y-4 shadow">
      <div class="bg-gray-100 p-2 font-sans text-sm">
        <div class="max-w-[1500px] mx-auto bg-white p-2 rounded-xl shadow-md space-y-10">
          <h1 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“˜ Data Collection</h1>
          <div class="space-y-4">              
            <details class="border border-blue-300 rounded-md p-4 shadow">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">ğŸ‘‘ Fortï¼†SH weekly Rewards</summary>
              <div id="ìš”ìƒˆë³´ìƒ" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <details class="border border-blue-300 rounded-md p-4 shadow">
              <summary class="cursor-pointer text-lg font-semibold text-blue-700">ğŸ§¬ Generational Hero Traits</summary>
              <div id="ì˜ì›…íŠ¹ì„±" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <!-- âš”ï¸ SVS_Event -->
            <details class="bg-white border border-blue-300 rounded-md p-4">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">âš”ï¸ SVS Preparation</summary>
              <div id="ì¤€ë¹„ë‹¨ê³„" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <!-- ğŸ›« ì´ë¯¼ ì‹œìŠ¤í…œ ì•ˆë‚´ -->
            <details class="bg-white border border-blue-300 rounded-md p-4">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">ğŸ›« Transfer State</summary>
              <div id="ì„œë²„ì´ë¯¼" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <!-- ë‹¨ì–´ë²ˆì—­ -->
            <details class="bg-white border border-blue-300 rounded-md p-4">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">ğŸ’¬ Any Word</summary>
              <div id="ìš©ì–´ì•ˆë‚´" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <!-- ì˜ì›… ì„±ê¸‰ì—… -->
            <details class="bg-white border border-blue-300 rounded-md p-4">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">ğŸŒŸ Hero Tier</summary>
              <div id="ì˜ì›…ì„±ê¸‰" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>

            <!-- í–‡ì‚´ì„¬ -->
            <details class="bg-white border border-blue-300 rounded-md p-4">
              <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">ğŸ Daybreak Island</summary>
              <div id="í–‡ì‚´ì„¬" class="mt-3 space-y-4 text-sm text-gray-800">
                <p class="text-gray-500 text-sm">ğŸ“¦ Data Loding...</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>
    
    <!-- iframe ì˜ì—­ -->
    <div id="frameWrapper" class="max-w-[1500px] w-full hidden bg-white rounded shadow gap-2">
      <iframe id="mainFrame" class="w-full bg-white rounded border transition-all duration-300" style="height: auto;" frameborder="0"></iframe>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn"
      class="hidden fixed bottom-6 right-6 z-50 bg-gray-800/60 text-white p-3 rounded-full shadow-lg hover:bg-gray-800/90 transition"
      aria-label="Scroll to top">

      <!-- Up arrow SVG icon -->
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
      </svg>
    </button>
  </div>
	
	<!-- âœ… PC ONLY: Bottom Ad -->
	<div id="pcBottomAd" class="hidden lg:block max-w-[1500px] mx-auto px-4 mt-8">
	  <div class="rounded-2xl border bg-white p-3 flex justify-center dark:bg-[#2c2c2c]">
	    <!-- âœ… Adsterra Bottom code here -->
	    <script>
			  atOptions = {
			    'key' : 'd555f753b8b61046e620961f70527942',
			    'format' : 'iframe',
			    'height' : 90,
			    'width' : 728,
			    'params' : {}
			  };
			</script>
			<script src="https://www.highperformanceformat.com/d555f753b8b61046e620961f70527942/invoke.js"></script>
	  </div>
	</div>  
	
	<!-- ì¹´í”¼ë¼ì´íŠ¸ -->
  <footer class="text-center text-xs font-bold text-white mt-5 mb-4">
    â›” Unauthorized copying prohibited | Â© Made By S645 ShinChan(uuid: 67331703)
  </footer>
	
  <script>
  (function () {
    const MIN_INTERVAL = 3000;
    const now = Date.now();
    const last = Number(sessionStorage.getItem("lastLoad") || 0);

    window.DISABLE_ADS = false;

    if (last && now - last < MIN_INTERVAL) window.DISABLE_ADS = true;
    sessionStorage.setItem("lastLoad", now);

    // iframe ì•ˆì´ë©´ ì°¨ë‹¨
    if (window.top !== window.self) window.DISABLE_ADS = true;

    // file://ë§Œ ì°¨ë‹¨ (referrer ì—†ìŒì€ í—ˆìš© ê¶Œì¥)
    if (document.referrer && document.referrer.startsWith("file://")) window.DISABLE_ADS = true;

    if (location.search.length > 200) window.DISABLE_ADS = true;
    if (location.hash.length > 200) window.DISABLE_ADS = true;

    document.addEventListener("visibilitychange", () => {
      if (document.hidden && !window.__ADS_LOADED) {
        window.DISABLE_ADS = true;
      }
    });
  })();
  </script>

  <!-- ì½˜í…ì¸  ì „ì²´ í­ ì œí•œ -->
  <div class="max-w-[1200px] mx-auto p-2">
    <div class="grid grid-cols-2 lg:grid-cols-2 gap-2"> 
      <!-- ê´‘ê³ 1 -->
      <div class="flex justify-center">
        <ins id="ad1" class="adsbygoogle"
          style="display:inline-block; width:100%; max-width:300px; height:250px"
          data-ad-client="ca-pub-8205102847358210"
          data-ad-slot="8804962791"></ins>
      </div>
  
      <!-- ê´‘ê³ 2 -->
      <div class="flex justify-center">
        <ins id="ad2" class="adsbygoogle"
          style="display:inline-block; width:100%; max-width:300px; height:250px"
          data-ad-client="ca-pub-8205102847358210"
          data-ad-slot="9326856916"></ins>
      </div>
    </div>
  </div>
	<script>
  (function(){
    if (window.DISABLE_ADS) return;

    let active = false;
    const activate = () => { active = true; };
    ["scroll","click","touchstart","keydown"].forEach(ev =>
      window.addEventListener(ev, activate, { once:true, passive:true })
    );

    function ensureAdsenseLoaded(){
      if (window.__ADS_LOADED) return;
      window.__ADS_LOADED = true;

      const s = document.createElement("script");
      s.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8205102847358210";
      s.async = true;
      s.crossOrigin = "anonymous";
      document.head.appendChild(s);
    }

    setTimeout(() => {
      if (!active) return;
      ensureAdsenseLoaded();
    }, 5000);
  })();
  </script>
  <script>
  (function(){
    if (window.DISABLE_ADS) return;

    const ids = ["ad1","ad2"];
    const filled = new Set();

    function safePush(){
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch {}
    }

    function pushWhenReady(){
      // adsense.js(adsbygoogle)ê°€ ì•„ì§ ì¤€ë¹„ ì•ˆ ëìœ¼ë©´, ì¤€ë¹„ë  ë•Œê¹Œì§€ ì§§ê²Œ í´ë§
      if (!window.adsbygoogle) {
        const t = setInterval(() => {
          if (window.adsbygoogle) {
            clearInterval(t);
            safePush();
          }
        }, 200);

        // í˜¹ì‹œ ì˜ì›íˆ ì•ˆ ëœ¨ëŠ” ìƒí™© ëŒ€ë¹„(ë„¤íŠ¸ì›Œí¬/ì°¨ë‹¨ ë“±) ì•ˆì „ì¥ì¹˜
        setTimeout(() => clearInterval(t), 8000);
        return;
      }
      safePush();
    }

    const obs = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if (!e.isIntersecting) return;
        const el = e.target;
        if (filled.has(el)) return;
        filled.add(el);

        pushWhenReady();
        obs.unobserve(el);
      });
    }, { threshold: 0.25 });

    ids.forEach(id=>{
      const el = document.getElementById(id);
      if (el) obs.observe(el);
    });
  })();
  </script> 
  <script>
    //ë©”ë‰´ë™ì‘
    const dropdowns = [...document.querySelectorAll('[data-dd]')];

    function setOpen(dd, open){
      const btn = dd.querySelector('.dd-btn');
      dd.classList.toggle('open', open);
      btn?.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    function closeAll(except = null){
      dropdowns.forEach(d => {
        if (d === except) return;
        setOpen(d, false);
      });
    }

    dropdowns.forEach(dd => {
      const btn = dd.querySelector('.dd-btn');

      // 1) Hover ì‹œ ì—´ê¸°
      dd.addEventListener('mouseenter', () => {
        closeAll(dd);
        setOpen(dd, true);
      });

      // 3) Click í† ê¸€
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const isOpen = dd.classList.contains('open');
        if (isOpen) {
          setOpen(dd, false);
        } else {
          closeAll(dd);
          setOpen(dd, true);
        }
      });

      // ë©”ë‰´ í´ë¦­ì€ ë°”ê¹¥í´ë¦­ìœ¼ë¡œ ë‹«íˆì§€ ì•Šê²Œ
      dd.querySelector('.dd-menu')?.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    });

    // ë°”ê¹¥ í´ë¦­ -> ë‹«ê¸°
    document.addEventListener('click', () => closeAll());

    // ESC -> ë‹«ê¸°
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeAll();
    });
  </script>
  <script>
    //ìœ„ë¡œ ìŠ¤í¬ë¡¤ ë²„íŠ¼
    const scrollToTopBtn = document.getElementById("scrollToTopBtn");

    window.addEventListener("scroll", () => {
      if (window.scrollY > 200) {
        scrollToTopBtn.classList.remove("hidden");
      } else {
        scrollToTopBtn.classList.add("hidden");
      }
    });

    scrollToTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>
  <script>
    //ë©”ë‰´ë³€ê²½
    const content = document.getElementById('content');
    
    document.querySelectorAll('.dd-item[data-load]').forEach(item => {
      item.addEventListener('click', async (e) => {
        e.preventDefault();

        const url = item.dataset.load;
        if (!url) return;

        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error('Load failed');

          const html = await res.text();
          content.innerHTML = html;

          // âœ… active ì²˜ë¦¬
          document.querySelectorAll('.dd-item.active')
            .forEach(x => x.classList.remove('active'));
          item.classList.add('active');

          // âœ… ë©”ë‰´ ë‹«ê¸°
          document.querySelectorAll('.dd.open')
            .forEach(d => d.classList.remove('open'));

        } catch (err) {
          content.innerHTML = `<p style="color:red">ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨</p>`;
          console.error(err);
        }
      });
    });
  </script>
  <script>
    //ë©”ë‰´ì„ íƒí‘œì‹œ
    let guideDetails = document.getElementById("guideDetails");
    let frameWrapper = document.getElementById('frameWrapper');
    let mainFrame = document.getElementById('mainFrame');
    
    // ê³µí†µ: ë©”ë‰´ ë‹«ê¸°
    function closeAllMenus(){
      document.querySelectorAll('.dd.open').forEach(dd => dd.classList.remove('open'));
    }
    
    window.addEventListener("message", function (event) {
      if (event.data.type === "SET_FRAME_SIZE") {
        const frame = document.getElementById("mainFrame");
        frame.style.height = event.data.height;
      }

      if (event.data.type === "FRAME_CHANGE") {
        const frame = document.getElementById("mainFrame");
        frame.style.height = `${event.data.height + 10}px`;
      }
    });
    
    document.querySelectorAll('.dd-item[data-frame]').forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();

        const url = item.dataset.frame;
        if (!url) return;
                
        // âœ… iframe ë³´ì´ê²Œ
        guideDetails.classList.add('hidden');
        frameWrapper.classList.remove('hidden');

        // âœ… iframe ë¡œë“œ
        mainFrame.src = url;

        // âœ… active í‘œì‹œ
        document.querySelectorAll('.dd-item.active').forEach(x => x.classList.remove('active'));
        item.classList.add('active');

        // âœ… ë©”ë‰´ ë‹«ê¸°
        closeAllMenus();
      });
    });
  </script>  
  <script>
    //Home ë©”ë‰´
    function ReturnHome() {
      // ê³µí†µ: ë©”ë‰´ ë‹«ê¸°
      document.querySelectorAll('.dd.open').forEach(dd => dd.classList.remove('open'));
      document.querySelectorAll('.dd-item.active').forEach(x => x.classList.remove('active'));
      document.querySelectorAll('.dd-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          
          // 1) ì—´ë ¤ìˆëŠ” ëª¨ë“  ë©”ë‰´ ë‹«ê¸°
          document.querySelectorAll('.dd.open').forEach(dd => dd.classList.remove('open'));
          
          // 2) guideDetails ë³´ì´ê¸°
          document.getElementById("guideDetails")?.classList.remove('hidden');
          
          // 3) frameWrapper ìˆ¨ê¸°ê¸°
          document.getElementById('frameWrapper')?.classList.add('hidden');
        });
      });
    }
  </script>
  <script>
    //ì—…ëƒíˆìŠ¤í† ë¦¬
    document.addEventListener("DOMContentLoaded", () => {
      // í•„ìš” ê²½ë¡œë¥¼ ì—¬ê¸°ì— ê°ê¸° ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ì„¸ìš”.
      const UPDATE_URL  = "https://s574shinchan.github.io/WOS_Calc/data/update/history.html"; // ê¸°ì¡´ê³¼ ë™ì¼
      const FAQ_URL     = "/FAQ.html";       // ì˜ˆ: S3/CloudFront ë£¨íŠ¸ì˜ faq.html
      const PRIVACY_URL = "/privacy.html";   // ì˜ˆ: ë£¨íŠ¸ì˜ privacy.html (ìƒˆ íƒ­)
    
      const guide   = document.getElementById("guideDetails");
      const wrapper = document.getElementById("frameWrapper");
      const frame   = document.getElementById("mainFrame");
    
      // iframe ë¡œë” (guide ìˆ¨ê¸°ê³  frame í‘œì‹œ)
      function openInFrame(url) {
        if (guide)   guide.style.display   = "none";
        if (wrapper) wrapper.style.display = "block";
        if (frame) {
          frame.style.height = "900px"; // ì´ˆê¸°ê°’(í•„ìš”ì‹œ ì¡°ì •)
          frame.src = url;
        }
      }
    
      // ì—…ë°ì´íŠ¸ ë‚´ì—­ â†’ iframe ë¡œë“œ (ê¸°ì¡´ ìš”êµ¬ì‚¬í•­)
      const updateLink = document.getElementById("updateLink");
      if (updateLink) {
        updateLink.addEventListener("click", (e) => {
          e.preventDefault();
          openInFrame(UPDATE_URL);
        });
      }
    
      // FAQ â†’ iframe ë¡œë“œ (ì—…ë°ì´íŠ¸ì™€ ë™ì¼ ë°©ì‹)
      const faqLink = document.getElementById("faqLink");
      if (faqLink) {
        faqLink.addEventListener("click", (e) => {
          e.preventDefault();
          openInFrame(FAQ_URL);
        });
      }
    
      // ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ â†’ ìƒˆ íƒ­
      const privacyLink = document.getElementById("privacyLink");
      if (privacyLink) {
        privacyLink.addEventListener("click", (e) => {
          e.preventDefault();
          const win = window.open(PRIVACY_URL, "_blank", "noopener");
          if (win) { win.opener = null; } // ë³´ì•ˆ
          else { window.location.href = PRIVACY_URL; } // íŒì—… ì°¨ë‹¨ ëŒ€ë¹„
        });
      }
    
      // (ì„ íƒ) ìì‹ í˜ì´ì§€ê°€ ë†’ì´ë¥¼ ì•Œë ¤ì˜¤ë©´ iframe ë†’ì´ ìë™ ë§ì¶¤
      if (!window.__childHeightListenerBound) {
        window.addEventListener("message", (e) => {
          if (!e.data || e.data.type !== "childHeight") return;
          if (frame) frame.style.height = Math.max(700, e.data.height) + "px";
        });
        window.__childHeightListenerBound = true;
      }
    });
  </script>
  <script>
    //ì„±ê¸‰ì—… ê³„ì‚°
    (() => {
      // â–¼ ìµœì´ˆëª¨ì§‘(ë¯¸ì‹¤ì‹œ ê°€ì •) ë¹„ìš©
      const RECRUIT_COST = 10;

      // â–¼ tier0~tier6 ì´ë¯¸ì§€ (7ì¥) â€” í•„ìš” ì‹œ ê²½ë¡œ êµì²´
      const TIER_IMG = (n) => `images/tier${n}.webp`;

      const TABLE_SEL = "#hero-upgrade-table";
      const OUT_SEL   = "#hero-shard-strip";
      const n = (s) => { const v = parseInt(String(s).replace(/[^0-9-]/g,""), 10); return Number.isFinite(v) ? v : 0; };

      // í‘œì—ì„œ 5í–‰Ã—6ì¹¸ ìˆ«ì í–‰ë ¬ ì¶”ì¶œ (1ì„±~5ì„±, ê° 6ì¹¸)
      function readMatrixFromTable() {
        const table = document.querySelector(TABLE_SEL);
        if (!table) throw new Error("í‘œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤: " + TABLE_SEL);
        const bodyRows = Array.from(table.querySelectorAll("tbody tr"));
        if (bodyRows.length < 5) throw new Error("í‘œ í–‰ ê°œìˆ˜ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤(5í–‰ í•„ìš”).");

        // ì…€ ì¸ë±ìŠ¤: 0=ë“±ê¸‰, 1..6=ì¹¸, ë§ˆì§€ë§‰=SubTotal
        const COL_START = 1, COL_END = 6;

        return bodyRows.slice(0, 5).map(tr => {
          const cells = tr.querySelectorAll("td");
          const row = [];
          for (let c = COL_START; c <= COL_END; c++) {
            row.push(n(cells[c]?.textContent || "0"));
          }
          return row; // ê¸¸ì´ 6
        });
      }

      // ëˆ„ì  ë³€í™˜ (ì˜ˆ: [1,1,2,2,2,12] â†’ [1,2,4,6,8,20])
      const cum = (arr) => { const out=[]; let s=0; for (const v of arr){ s+=v; out.push(s); } return out; };

      // âœ… ì´ë¯¸ì§€/ë¬¸êµ¬ í† ê¸€ (í‹°ì–´ ìŠ¤íŠ¸ë¦½ ì˜ì—­)
      function toggleTierGallery(showImages, message = "") {
        const box = document.querySelector(OUT_SEL);
        const fb  = document.getElementById("tierFallback"); // ëŒ€ì²´ë¬¸êµ¬ ìš”ì†Œ (í•„ìˆ˜)
        if (!box) return;

        if (showImages) {
          // ì´ë¯¸ì§€ ì˜ì—­ í‘œì‹œ
          box.classList.remove("hidden"); box.style.display = "";
          if (fb) { fb.classList.add("hidden"); fb.style.display = "none"; fb.textContent = ""; }
        } else {
          // ì´ë¯¸ì§€ ì „ë¶€ ì œê±° + ì˜ì—­ ìˆ¨ê¹€, ë¬¸êµ¬ í‘œì‹œ
          box.innerHTML = "";
          box.classList.add("hidden"); box.style.display = "none";
          if (fb) { fb.classList.remove("hidden"); fb.style.display = ""; fb.textContent = message || "â€» ìµœì´ˆëª¨ì§‘ì‹œ 10ê°œì˜ ì¡°ê°ì´ í•„ìš”í•©ë‹ˆë‹¤."; }
        }
      }

      // âœ“ ì¹´ë“œ/ìœ ë‹› ì´ë¯¸ì§€/ì•ˆë‚´ë¬¸ í† ê¸€ (ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ë¬´ì‹œ)
      function toggleRecruitUI({ showImage }) {
        const img  = document.getElementById('unitImage');        // ì¹´ë“œ/ìœ ë‹› ì´ë¯¸ì§€ ìš”ì†Œ(ì˜µì…˜)
        const hint = document.getElementById('firstRecruitHint'); // ì•ˆë‚´ë¬¸ ìš”ì†Œ(ì˜µì…˜)
        if (!img && !hint) return;

        if (showImage) {
          if (img)  { img.classList.remove('hidden'); img.style.display = ''; }
          if (hint) { hint.textContent = ''; }
        } else {
          if (img)  { img.classList.add('hidden'); img.style.display = 'none'; }
          if (hint) { hint.textContent = 'â€» ìµœì´ˆëª¨ì§‘ì‹œ 10ê°œì˜ ì¡°ê°ì´ í•„ìš”í•©ë‹ˆë‹¤.'; }
        }
      }

      // ì¡°ê° ìˆ˜ë¥¼ 1ì„±â†’5ì„± ìˆœìœ¼ë¡œ ì†Œëª¨í•˜ì—¬ ê° í–‰ì˜ tier(0..6) ê³„ì‚°
      // â–¶ ìµœì´ˆëª¨ì§‘ì´ 'ë¯¸ì‹¤ì‹œ' ê°€ì •: have < RECRUIT_COSTì´ë©´ ëª¨ë‘ 0
      function computeTiers(pieces) {
        const have = Math.max(0, n(pieces));
        const tiers = new Array(5).fill(0);
        if (have < RECRUIT_COST) return tiers;

        const matrix = readMatrixFromTable(); // 5Ã—6
        let remain = have - RECRUIT_COST;
        if (remain <= 0) return tiers;

        for (let r = 0; r < 5; r++) {
          const cums = cum(matrix[r]); // [c1, c1+c2, ...]
          let t = 0; // 0..6
          for (let k = 0; k < 6; k++) {
            if (remain >= cums[k]) t = k + 1; else break;
          }
          tiers[r] = t;

          const rowTotal = cums[5];
          if (remain >= rowTotal) {
            remain -= rowTotal; // ì „ë¶€ ì±„ì› ìœ¼ë©´ ë‹¤ìŒ í–‰ìœ¼ë¡œ carry
          } else {
            break; // ë¶€ë¶„ë§Œ ì±„ì› ìœ¼ë©´ ì´í›„ í–‰ì€ ì§„í–‰í•˜ì§€ ì•ŠìŒ
          }
        }
        return tiers;
      }

      // ì´ë¯¸ì§€ 5ì¥ ë Œë”
      function renderTiers(tiers) {
        const box = document.querySelector(OUT_SEL);
        if (!box) return;
        box.innerHTML = "";
        tiers.forEach(t => {
          const img = document.createElement("img");
          img.src = TIER_IMG(t);
          img.alt = `tier${t}`;
          box.appendChild(img);
        });
      }

      // ê³µê°œ API: ì¡°ê° ìˆ˜ë¥¼ ë„˜ê¸°ë©´ ì¦‰ì‹œ ê°±ì‹ 
      window.updateHeroShardState = function(pieces) {
        try {
          const have = Math.max(0, n(pieces));

          // â›³ 0~9ë©´: í‹°ì–´ ì´ë¯¸ì§€ 6ê°œ(=ë  ì „ì²´) ìˆ¨ê¸°ê³  ë¬¸êµ¬ë§Œ
          if (have < RECRUIT_COST) {
            toggleRecruitUI({ showImage: false });
            toggleTierGallery(false, "â€» ìµœì´ˆëª¨ì§‘ì‹œ 10ê°œì˜ ì¡°ê°ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
          }

          // 10 ì´ìƒ: ì´ë¯¸ì§€ ì˜ì—­ ë³´ì´ê¸° â†’ ê³„ì‚°/ë Œë”
          toggleRecruitUI({ showImage: true });
          toggleTierGallery(true);

          const tiers = computeTiers(have);
          renderTiers(tiers);
        } catch (err) {
          const box = document.querySelector(OUT_SEL);
          if (box) box.textContent = "ì˜¤ë¥˜: " + err.message;
          console.error(err);
        }
      };

      // ì…ë ¥ ì´ë²¤íŠ¸
      const $input = document.getElementById("pieceInput");
      $input.addEventListener("input", e => {
        let val = parseInt(e.target.value || "0", 10);
        if (val > 1075) {
          val = 1075;
          e.target.value = val; // ì…ë ¥ë€ì„ ì¦‰ì‹œ 1075ë¡œ ë˜ëŒë¦¼
        } else if (val < 0 || isNaN(val)) {
          val = 0;
          e.target.value = val;
        }
        updateHeroShardState(val); // ê³„ì‚° ë°˜ì˜
      });
      $input.addEventListener("keydown", e => { if (e.key === "Enter") updateHeroShardState($input.value); });

      // ì´ˆê¸° í‘œì‹œ(ê¸°ë³¸ê°’ 0 â†’ ë¬¸êµ¬ë§Œ í‘œì‹œ)
      updateHeroShardState($input.value);
    })();
  </script>
  <script>
    //uuid ë³µì‚¬
    let copyTimer = null;

    function copySupportNumber() {
      const text = document.getElementById("supportNumber").innerText;
      const btn = document.getElementById("copyBtn");
      const iconBook = document.getElementById("iconBook");
      const iconCheck = document.getElementById("iconCheck");
      const toast = document.getElementById("toast");
      
      navigator.clipboard.writeText(text).then(() => {
        // ë²„íŠ¼: ì±… â†’ ì²´í¬
        btn.classList.remove("bg-slate-700", "hover:bg-slate-600");
        btn.classList.add("bg-emerald-500", "hover:bg-emerald-600");
        iconBook.classList.add("hidden");
        iconCheck.classList.remove("hidden");

        // í† ìŠ¤íŠ¸ í‘œì‹œ
        toast.classList.remove("opacity-0");
        toast.classList.add("opacity-100");

        // ê¸°ì¡´ íƒ€ì´ë¨¸ ì œê±°í•˜ê³  ìƒˆ íƒ€ì´ë¨¸ ì‹œì‘
        if (copyTimer) clearTimeout(copyTimer);

        copyTimer = setTimeout(() => {
          // ë²„íŠ¼ ë˜ëŒë¦¬ê¸°
          btn.classList.remove("bg-emerald-500", "hover:bg-emerald-600");
          btn.classList.add("bg-slate-700", "hover:bg-slate-600");
          iconCheck.classList.add("hidden");
          iconBook.classList.remove("hidden");

          // í† ìŠ¤íŠ¸ ìˆ¨ê¸°ê¸°
          toast.classList.remove("opacity-100");
          toast.classList.add("opacity-0");
        }, 2500);
      });
    }
  </script>
  <script>
    //ë‹¤í¬ëª¨ë“œ
    function broadcastDarkMode(isDark) {
      document.querySelectorAll('iframe').forEach(frame => {
        try {
          frame.contentWindow.postMessage({ type: 'DARK_MODE', value: isDark },'*');
        } catch (e) {}
      });
    }
    
    function applySavedDarkMode() {
      const isDark = localStorage.getItem('darkMode') === 'true';
      document.body.classList.toggle('dark-mode', isDark);
      broadcastDarkMode(isDark);
    }
    
    function ActiveDarkMode(){
      const isDark = document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', isDark ? 'true' : 'false');
      
      broadcastDarkMode(isDark);
    }
    
    // âœ… í˜ì´ì§€ ë¡œë“œë˜ë©´ ë°”ë¡œ ì ìš© (ìƒˆë¡œê³ ì¹¨ í¬í•¨)
    document.addEventListener('DOMContentLoaded', applySavedDarkMode);
    
    //  window.addEventListener('DOMContentLoaded', () => {
    //    const isDark = localStorage.getItem('darkMode') === 'true';
    //    document.body.classList.toggle('dark-mode', isDark);
    //  }); 
    //}

    document.getElementById('mainFrame')?.addEventListener('load', () => {
      const isDark = localStorage.getItem('darkMode') === 'true';
      broadcastDarkMode(isDark);
    });
  </script>
  <script>
    //ìë£Œëª¨ìŒ detail
    const baseUrl = 'https://s574shinchan.github.io/WOS_Calc/data/';
    
    // [ID] => [íŒŒì¼ëª…] ë§¤í•‘
    const fileMap = {
      ìš”ìƒˆë³´ìƒ: 'ìš”ìƒˆë³´ìƒ_EN.html',
      ì˜ì›…íŠ¹ì„±: 'ì˜ì›…íŠ¹ì„±_EN.html',
      ì¤€ë¹„ë‹¨ê³„: 'SVS_Pre_EN.html',
      ì„œë²„ì´ë¯¼: 'ì„œë²„ì´ë¯¼_EN.html',
      ìš©ì–´ì•ˆë‚´: 'ward.html',
      ì˜ì›…ì„±ê¸‰: 'ì˜ì›…ì„±ê¸‰ì—…_EN.html',
      í–‡ì‚´ì„¬: 'Island.html'
    };
    
    // [ID] => ë¡œë”© ì—¬ë¶€ ì €ì¥
    const loadState = {};
    Object.keys(fileMap).forEach(id => loadState[id] = false);
    
    // ëª¨ë“  <details> ìš”ì†Œì— toggle ì´ë²¤íŠ¸ ë°”ì¸ë”©
    document.querySelectorAll('details').forEach(detail => {
      detail.addEventListener('toggle', async () => {
        for (const id in fileMap) {
          const target = detail.querySelector(`#${id}`);
          if (target && !loadState[id] && detail.open) {
            try {
              const res = await fetch(`${baseUrl}${fileMap[id]}`);
              if (!res.ok) throw new Error('íŒŒì¼ ìš”ì²­ ì‹¤íŒ¨');
              const html = await res.text();
              target.innerHTML = html;
              loadState[id] = true;
            } catch (e) {
              target.innerHTML = `<p class="text-red-500">âš ï¸ Data Loding Fail.</p>`;
            }
          }
        }
      });
    });
  </script>
  <script>
    //ì–¸ì–´ì„ íƒ
    function setupLangSelect(id) {
      const el = document.getElementById(id);
      if (el) {
        el.addEventListener('change', function () {
          const langCode = this.value; // ì˜ˆ: index_en.html
          const lang = (langCode.split('_')[1]?.split('.')[0] || 'ko').toUpperCase();
          localStorage.setItem('lang', lang);
          window.location.href = langCode;
        });
      }
    }
  
    setupLangSelect('langSelectPC');
  </script>  
  <script>
    // F12, Ctrl+Shift+I, Ctrl+U ë“± ë°©ì§€
    document.onkeydown = function (e) {
      if (
        e.keyCode === 123 || // F12
        (e.ctrlKey && e.shiftKey && e.keyCode === 73) || // Ctrl+Shift+I
        (e.ctrlKey && e.shiftKey && e.keyCode === 74) || // Ctrl+Shift+J
        (e.ctrlKey && e.keyCode === 85) // Ctrl+U
      ) {
        e.preventDefault();
        return false;
      }
    };
  
    // ìš°í´ë¦­ ë°©ì§€
    document.addEventListener("contextmenu", (e) => e.preventDefault());
  </script>
  <script>
    // âœ… ê³µìš© í•¨ìˆ˜: iframe ë¡œë“œ + ë©”ë‰´/í”„ë ˆì„ í‘œì‹œ ì „í™˜
    window.loadInMainFrame = function(url){
      // ë©”ë‰´ ìˆ¨ê¸°ê³ , ê²°ê³¼ í”„ë ˆì„ í‘œì‹œ
      guideDetails?.classList.add('hidden');
      frameWrapper?.classList.remove('hidden');

      // âœ… ìƒëŒ€/ì ˆëŒ€ ì–´ë–¤ ê²Œ ì™€ë„ ì•ˆì „ ì²˜ë¦¬
      const resolved = new URL(url, window.location.href).href;

      console.log('[index] loadInMainFrame:', { url, resolved });

      // ê°™ì€ URLì´ë©´ ë¦¬ë¡œë“œ ê°•ì œ
      const cur = mainFrame.getAttribute('src') || '';
      if (cur === resolved) {
        mainFrame.src = 'about:blank';
        setTimeout(() => (mainFrame.src = resolved), 30);
      } else {
        mainFrame.src = resolved;
      }
    };

    window.goBackToMenu = function(){
      mainFrame.src = 'about:blank';
      frameWrapper?.classList.add('hidden');
      guideDetails?.classList.remove('hidden');
    };

    // âœ… a.html(ìì‹)ì—ì„œ ë³´ë‚´ëŠ” ë©”ì‹œì§€ ìˆ˜ì‹ 
    window.addEventListener('message', (e) => {
      // ë¡œì»¬ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” originì´ ê°™ìŒ
      // ì‹¤ì„œë¹„ìŠ¤ì—ì„œëŠ” e.origin ê²€ì¦ ê¶Œì¥
      console.log('[index] message received:', e.data, 'origin:', e.origin);

      if (e.data?.type === 'NAVIGATE_FRAME') {
        // e.data.url: ì˜ˆ) "research.html"
        window.loadInMainFrame(e.data.url);
      }

      // âœ… ìì‹ í˜ì´ì§€ê°€ ìì‹ ì˜ ë†’ì´ë¥¼ ë³´ë‚´ë©´ mainFrame ë†’ì´ ìë™ ì¡°ì ˆ
      if (e.data?.type === 'FRAME_CHANGE' && typeof e.data.height === 'number') {
        mainFrame.style.height = `${e.data.height}px`;
      }
    });
  </script>
  <script>
    //ì´ë¯¸ì§€ ëª¨ë‹¬
    let currentScale = 1;
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
  
    window.addEventListener('message', (event) => {
      if (event.data.type === 'SHOW_IMAGE_MODAL') {
        modalImg.src = event.data.url;
        currentScale = 1;
        modalImg.style.scale = currentScale;
        modal.classList.remove('hidden');
      }
    });
  
    modalImg.addEventListener('wheel', (e) => {
      e.preventDefault();
      currentScale += (e.deltaY < 0 ? 0.05 : -0.05);
      currentScale = Math.max(0.1, Math.min(3, currentScale));
      modalImg.style.scale = currentScale;
    });
  
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        modalImg.src = '';
      }
    });
  </script>
  <script>
    (function () {
      // âœ… ì–¸ì–´ì½”ë“œ â†” íŒŒì¼ëª… ë§¤í•‘(ëŒ€ì†Œë¬¸ì ì •í™•íˆ)
      const FILE_BY_LANG = {
        ko: "index.html",
        en: "index_EN.html",
        jp: "index_JP.html",
      };
      const LANG_BY_FILE = {
        "index.html": "ko",
        "index_EN.html": "en",
        "index_JP.html": "jp",
      };

      function detectLang() {
        // 1) ?lang= ìš°ì„ 
        const p = new URLSearchParams(location.search);
        const q = (p.get("lang") || "").toLowerCase();
        if (q && FILE_BY_LANG[q]) return q;

        // 2) íŒŒì¼ëª…ì—ì„œ ì¶”ì¶œ
        const file = (location.pathname.split("/").pop() || "index.html");
        if (LANG_BY_FILE[file]) return LANG_BY_FILE[file];

        // 3) localStorage
        const mem = (localStorage.getItem("lang") || "").toLowerCase();
        if (FILE_BY_LANG[mem]) return mem;

        // 4) ê¸°ë³¸
        return "ko";
      }

      function setupLangSelect(id) {
        const el = document.getElementById(id);
        if (!el) return;

        const lang = detectLang();
        const currentFile = (location.pathname.split("/").pop() || "index.html");
        const currentTarget = FILE_BY_LANG[lang];

        // âœ… select ì˜µì…˜ valueê°€ "íŒŒì¼ëª…"ì´ë“  "ì–¸ì–´ì½”ë“œ"ë“  ë‘˜ ë‹¤ ì§€ì›
        //    1) ìš°ì„  íŒŒì¼ëª…ìœ¼ë¡œ ë§ì¶°ë³´ê¸°
        if ([...el.options].some(o => o.value === currentTarget)) {
          el.value = currentTarget; // ex) index_EN.html
        }
        //    2) ì•„ë‹ˆë©´ ì–¸ì–´ì½”ë“œë¡œ ë§ì¶°ë³´ê¸°
        else if ([...el.options].some(o => o.value === lang)) {
          el.value = lang;          // ex) en
        }

        el.addEventListener("change", function () {
          let next;
          // ì„ íƒê°’ì´ ì–¸ì–´ì½”ë“œì¸ì§€ íŒŒì¼ëª…ì¸ì§€ íŒë³„
          const v = this.value;

          if (FILE_BY_LANG[v]) {          // valueê°€ ì–¸ì–´ì½”ë“œ(ko/en/jp)
            next = FILE_BY_LANG[v];
            localStorage.setItem("lang", v); // í•­ìƒ ì†Œë¬¸ì ì €ì¥
          } else if (LANG_BY_FILE[v]) {    // valueê°€ íŒŒì¼ëª…(index_EN.html ë“±)
            next = v;
            localStorage.setItem("lang", LANG_BY_FILE[v]);
          } else {
            // ì•Œ ìˆ˜ ì—†ëŠ” ê°’ì´ë©´ ì•ˆì „í•˜ê²Œ koë¡œ
            next = FILE_BY_LANG.ko;
            localStorage.setItem("lang", "ko");
          }

          // ë™ì¼ íŒŒì¼ ì„ íƒí•´ë„ ê°•ì œ ì´ë™(ìºì‹œ/ì¿¼ë¦¬ í˜¼ì„  ë°©ì§€)
          if (currentFile === next) {
            location.href = next;
          } else {
            location.href = next;
          }
        });
      }

      // âœ… ë‘ ì…€ë ‰íŠ¸ ëª¨ë‘ ì ìš©
      setupLangSelect("langSelectPC");

      // âœ… ì „ì—­ì—ë„ ë…¸ì¶œ(ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ì“°ë„ë¡)
      window.lang = detectLang();
      localStorage.setItem("lang", window.lang); // ì†Œë¬¸ì ê³ ì •
    })();
  </script>
  <script data-name="BMC-Widget" data-cfasync="false"
          src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" 
          data-id="shin0825" 
          data-description="Support me"         
          data-color="#FFDD00" 
          data-position="Right" 
          data-x_margin="95"
          data-y_margin="18">
  </script>  
  <script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer>
    //ë””ìŠ¤ì½”ë“œ ì•„ì´ì½˜
    new Crate({
        server: '1389897321013055558', // Server_WOS_ShinChan
        channel: '1389897473643905106' // #chat
    })
  </script>
  </body>
</html>
