<!DOCTYPE html>
<html lang="ko">
<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>SVS 점수계산</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* 1) 라이트 기본 팔레트 */
      :root{
        --bg:#ffffff;         /* 페이지 배경 */
        --text:#111827;       /* 텍스트 색 */ 
        --card:#ffffff;       /* 카드/표 배경 */
        --head:#f3f4f6;       /* thead 배경 */
        --border:#e5e7eb;     /* 테두리 */
        --in:#d1fae5;         /* 입력칸(초록) */
        --sum:#fef08a;        /* 합계(노랑) */
        --tab-bg:#f9fafb;     /* 비선택 탭 배경 */
      }

      /* 2) 다크모드 팔레트 (body.dark-mode 클래스 사용 시) */
      body.dark-mode{
        --bg:#0b1220;
        --text:#e5e7eb;
        --card:#0f172a;
        --head:#111827;
        --border:#374151;
        --in:#134e4a;
        --sum:#a57c00;
        --tab-bg:#1f2937;
      }

      /* 3) 공통 스타일 */
      body{ background:var(--bg); color:var(--text); }
      .card{ background:var(--card); box-shadow:0 8px 24px rgba(0,0,0,.06) }
      .t{ border-collapse:collapse; width:100%; color:var(--text) }
      .t th,.t td{ border:1px solid var(--border); padding:.5rem; font-size:13px; vertical-align:top }
      .head{ background:var(--head); font-weight:600 }
      .in{ background:var(--in) }      /* 입력 영역(초록) */
      .sum{ background:var(--sum) }    /* 합계(노랑) */
      .r{text-align:right}
      .c{ text-align:center !important; }
      .c input[type="checkbox"]{ display:block; margin:0 auto; }
    	.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; text-align: right}
			.tin{ background:var(--in); border:1px solid var(--border); border-radius:9999px; padding:.45rem .95rem; text-align:right; font-size:1rem }
			.tintb { background:var(--in); padding:.45rem .95rem; text-align:right; font-size:1rem }
			.tcap{ font-size:.83rem; color:var(--muted) }
			.tlabel{ font-size:1.05rem; font-weight:800 }
			.tile{
				background:var(--card); border:1px solid var(--border); border-radius:16px;
				box-shadow:var(--shadow); padding:1.05rem 1.1rem;
			}
      input[type="number"]{
        appearance:textfield; background:transparent; color:var(--text);
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button{ appearance:none; margin:0 }

      .maxw{max-width:1100px}

      /* 4) 탭 */
      .tabs{
        display:flex; gap:.25rem;
        border-bottom:1px solid var(--border);
        margin-bottom:.75rem
      }
      .tab-btn{
        padding:.6rem 1rem; font-weight:600;
        border:1px solid var(--border); border-bottom:0;
        border-top-left-radius:.6rem; border-top-right-radius:.6rem;
        background:var(--tab-bg); color:var(--text)
      }
      .tab-btn[aria-selected="true"]{ background:var(--card) }
      .tab-panel{ display:none }
      .tab-panel.active{ display:block }

      /* 좌우 2열 그리드 (모바일 1열) */
      .cols{ display:grid; grid-template-columns:1fr; gap:.75rem; align-items:start; }
      .col-qty{ background:var(--in) }
			.row-sub td{ background:var(--sum); font-weight:700 }
			.grid-wrap{ display:grid; grid-template-columns:1fr; gap:1rem }
			@media (min-width:1100px){ .grid-wrap{ grid-template-columns: 1fr 1.2fr; } }

			.dense th, .dense td{ padding:.36rem .42rem; font-size:.92rem; line-height:1.25 }
			.dense .col-qty input{ height:38px; padding:.2rem .6rem; font-size:.9rem }

			/* ▼ 병사 테이블 밀집 모드 */
			.table-dense th, .table-dense td{
				padding:.32rem .42rem;
				line-height:1.15;
				font-size:.92rem;
			}
			.table-dense thead th{ padding:.36rem .42rem }
			.table-dense .col-qty input.tin.qty{
				height:40px; padding:.22rem .6rem; font-size:.9rem;
			}
			.table-dense .pts{ white-space:nowrap; }
		</style>
	</head>
	<body class="p-3 md:p-6">
		<div class="max-w-[1500px]">
			<!-- 탭 버튼 -->
			<div class="tabs">
				<button class="tab-btn" data-tab="day1" aria-selected="true">1일차</button>
				<button class="tab-btn" data-tab="day2" aria-selected="false">2일차</button>
        <button class="tab-btn" data-tab="day3" aria-selected="false">3일차</button>
        <button class="tab-btn" data-tab="day4" aria-selected="false">4일차</button>
        <button class="tab-btn" data-tab="day5" aria-selected="false">5일차</button>
      </div>

			<!-- 탭 컨텐츠(iframe 하나만 사용) -->
			<iframe class="w-full" id="tab-frame" title="SVS 탭 컨텐츠" referrerpolicy="no-referrer" style="height: 1420px;"></iframe>
    </div>
		
    <script>
			// 탭별 파일 매핑
			const FILES = {
				day1: 'SVSPre1.html',
				day2: 'SVSPre2.html',
				day3: 'SVSPre3.html',
				day4: 'SVSPre4.html',
				day5: 'SVSPre5.html',
			};

			const frame = document.getElementById('tab-frame');

			function setTab(tab){
				// 탭 버튼 상태
				document.querySelectorAll('.tab-btn').forEach(b=>{
					b.setAttribute('aria-selected', String(b.dataset.tab === tab));
				});

				// 캐시 회피 쿼리 추가(배포 후 최신 반영 보장)
				const url = FILES[tab] + '?v=' + Date.now();
				frame.src = url;
			}

			// 부모 ← 자식(iframe) 높이 동기화: 서브 HTML에서 postMessage({type:'FRAME_CHANGE', height}) 호출 시 반영
			window.addEventListener('message', (e)=>{
				if(!e.data || typeof e.data !== 'object') return;
				if(e.data.type === 'FRAME_CHANGE' && Number.isFinite(e.data.height)){
					frame.style.height = e.data.height + 'px';
				} else if(e.data.type === 'SET_FRAME_SIZE' && e.data.height){
					frame.style.height = e.data.height;
					if(e.data.width) frame.style.width = e.data.width;
				}
			});

			// 탭 클릭
			document.querySelectorAll('.tab-btn').forEach(btn=>{
				btn.addEventListener('click', ()=> setTab(btn.dataset.tab));
			});

			// 첫 진입: 1일차
			document.addEventListener('DOMContentLoaded', ()=> setTab('day1'));

			// 임베드 페이지 사이즈 변화 대비(모바일 회전 등)
			//window.addEventListener('resize', ()=>{
				// 서브가 다시 높이 보내도록 유도(선택사항)
				//frame.contentWindow?.postMessage({type:'REQ_FRAME_SIZE'}, '*');
			//});

			// (선택) 우클릭/특정 단축키 차단이 필요하면 여기에 추가 가능
			// document.addEventListener('contextmenu', e=>e.preventDefault());
		</script>
		
    <!-- (선택) 프레임 높이 통신/보안 키 차단 스크립트 -->
    <script>
			function sendHeightToParent() {
				const height = document.body.scrollHeight + 10;
				window.parent.postMessage({ type: "FRAME_CHANGE", height }, "*");
			}

			// 페이지 최초 로드 시
			window.addEventListener("load", () => {
				setTimeout(sendHeightToParent, 100); // 약간의 렌더링 대기
			});

			function loadPage(page) {
				const isMobile = window.innerWidth <= 768;
				const height = isMobile ? "550px" : "345px"
					window.location.href = page;
				window.parent.postMessage({ type: "SET_FRAME_SIZE", height: height, width: "100%"}, "*");
			}
      document.addEventListener("contextmenu", event => event.preventDefault());
      document.addEventListener("keydown", function (e) {
        if (e.key === "F12" ||
            (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
            (e.ctrlKey && (e.key === "U" || e.key === "S"))) {
          e.preventDefault();
        }
      });
    </script>
  </body>
</html>
