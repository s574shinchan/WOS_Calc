<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WOS ì¬ë£Œëª¨ìŒ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ì´ë¯¸ì§€ í™•ëŒ€ ì‹œ ì»¤ì„œ ë³€ê²½ */
    #modalImage {
      cursor: grab;
      user-select: none;
      -webkit-user-drag: none;
    }
  </style>
</head>
<body class="bg-gray-100 p-2 font-sans text-sm">
  <div class="max-w-[1500px] mx-auto bg-white p-2 rounded-xl shadow-md space-y-6">
    <h1 class="text-2xl font-bold text-gray-800">ğŸ“˜ ê°ì¢…ì¬ë£Œìˆ˜ ì´ë¯¸ì§€ ìë£Œ</h1>

    <!-- ì´ë¯¸ì§€ ì„¹ì…˜ -->
    <!-- FC 1 ~ 10 -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-2">ğŸ¤ FC1 ~ 10 ì¬ë£Œ</summary>
      <div id="ë¶ˆì˜ìˆ˜ì •" class="mt-3">
        <img src="images/FC1-10.webp" alt="FC1~10"
             data.full="images/FC1-10.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>

    <!-- ì˜ì£¼ì¥ë¹„ -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-2">ğŸ›¡ ì˜ì£¼ì¥ë¹„ì¬ë£Œ</summary>
      <div id="ì˜ì£¼ì¥ë¹„ì¬ë£Œ" class="mt-3">
        <img src="images/ì˜ì£¼ì¥ë¹„.webp" alt="ì˜ì£¼ì¥ë¹„ì¬ë£Œ"
             data.full="images/ì˜ì£¼ì¥ë¹„.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>

    <!-- ì˜ì£¼ë³´ì„ -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-3">ğŸ’ ì˜ì£¼ë³´ì„ì¬ë£Œ</summary>
      <div class="overflow-hidden">
        <img src="images/ì˜ì£¼ë³´ì„.webp" alt="ì˜ì£¼ë³´ì„ì¬ë£Œ"
             data.full="images/ì˜ì£¼ë³´ì„.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>

    <!-- ì˜ì›…ì¥ë¹„ -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-3">ğŸ¦¸ ì˜ì›…ì¥ë¹„ì¬ë£Œ</summary>
      <div class="overflow-hidden">
        <img src="images/ì˜ì›…ì¥ë¹„ë‹¨ë ¨_ìƒì„¸.webp" alt="ì˜ì›…ì¥ë¹„ì¬ë£Œ"
             data.full="images/ì˜ì›…ì¥ë¹„ì¬ë£Œ.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>

    <!-- ì—°ì´ë¯¸ì…˜ -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-3">ğŸ¯ ì—°ì´ë¯¸ì…˜ëª©ë¡</summary>
      <div class="overflow-hidden">
        <img src="images/ì—°ì´ë¯¸ì…˜.webp" alt="ì—°ì´ë¯¸ì…˜"
             data.full="images/ì—°ì´ë¯¸ì…˜.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>
    
    <!-- í”„ë¡œìŠ¤íŠ¸ ë“œë˜ê³¤ ì— í˜ëŸ¬ -->
    <details class="bg-white border border-blue-300 rounded-md p-4">
      <summary class="text-lg font-bold text-blue-700 mb-3">ğŸ‰ í”„ë¡œìŠ¤íŠ¸ ë“œë˜ê³¤ ì— í˜ëŸ¬</summary>
      <div class="overflow-hidden">
        <img src="images/Tyrant.webp" alt="Tyrant"
             data.full="images/Tyrant.webp"
             loading="lazy"
             class="w.full h-auto rounded shadow cursor-pointer"
             onclick="openImage(this)" />
      </div>
    </details>
    
  </div>

  <!-- ğŸ” ì´ë¯¸ì§€ ë·°ì–´ ëª¨ë‹¬ -->
  <div id="imageViewer"
       class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-lg max-w-[95vw] max-h-[90vh] flex flex-col">
    <!--<div class="bg-white rounded-xl shadow-lg w-[95vw] max-w-[1100px] h-[85vh] flex flex-col"> -- >
      <!-- ìƒë‹¨ íˆ´ë°” -->
      <div id="viewerToolbar" class="flex items-center justify-between px-3 py-2 border-b text-[11px] sm:text-xs md:text-sm">
        <div id="viewerFilename" class="text-gray-700 truncate max-w-[60%]"></div>
        <div class="flex gap-1">
          <button type="button" id="btnZoomOut"
            class="px-2 py-1 border rounded text-xs bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
            </svg>
          </button>

          <button type="button" id="btnZoomReset"
            class="px-2 py-1 border rounded text-xs bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 4v6h6M20 20v-6h-6M20 4h-6m0 0V4m0 0l6 6M4 20h6m0 0H4m0 0l6-6" />
            </svg>
          </button>

          <button type="button" id="btnZoomIn"
            class="px-2 py-1 border rounded text-xs bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 4v16m8-8H4"/>
            </svg>
          </button>
          <button type="button" id="btnDownload"
                  class="px-2 py-1 border rounded text-xs bg-blue-500 text-white hover:bg-blue-600">
            ë‹¤ìš´ë¡œë“œ
          </button>
          <button type="button" id="btnClose"
                  class="px-2 py-1 border rounded text-xs bg-gray-200 hover:bg-gray-300">
            ë‹«ê¸°
          </button>
        </div>
      </div>
      <!-- ì´ë¯¸ì§€ í”„ë ˆì„ -->
      <div id="viewerFrame"
           class="m-2 border rounded-lg bg-black overflow-hidden flex items-center justify-center">
        <img id="modalImage" src="none" alt=""
             class="select-none"
             style="transform-origin:center center;" />
      </div>
    </div>
  </div>

  <!-- Scroll to Top Button -->
  <button id="scrollToTopBtn"
    class="hidden fixed bottom-6 right-6 z-50 bg-gray-800/60 text-white p-3 rounded.full shadow-lg hover:bg-gray-800/90 transition"
    aria-label="Scroll to top">
    <!-- Up arrow SVG icon -->
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
    </svg>
  </button>

  <script>
    // ============================
    // ğŸ” ì´ë¯¸ì§€ ë·°ì–´ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸
    // ============================
    const viewerOverlay = document.getElementById("imageViewer");
    const viewerImg = document.getElementById("modalImage");
    const viewerFrame = document.getElementById("viewerFrame");
    const viewerFilename = document.getElementById("viewerFilename");
    const btnClose = document.getElementById("btnClose");
    const btnZoomIn = document.getElementById("btnZoomIn");
    const btnZoomOut = document.getElementById("btnZoomOut");
    const btnZoomReset = document.getElementById("btnZoomReset");
    const btnDownload = document.getElementById("btnDownload");

    let currentScale = 1;
    let offsetX = 0;
    let offsetY = 0;

    let isDragging = false;
    let dragStartX = 0;
    let dragStartY = 0;
    let dragOriginX = 0;
    let dragOriginY = 0;

    function applyTransform() {
      viewerImg.style.transform =
        `translate(${offsetX}px, ${offsetY}px) scale(${currentScale})`;
    }

    function resetTransform() {
      currentScale = 1;
      offsetX = 0;
      offsetY = 0;
      applyTransform();
    }

    function openViewer(src) {
      resetTransform();
      
      // ì´ë¯¸ì§€ ë¡œë“œ í›„ í”„ë ˆì„/ì´ë¯¸ì§€ í¬ê¸° ë§ì¶”ê¸°
      viewerImg.onload = () => {
        fitViewerToImage();
        resetTransform();   // í¬ê¸° ë§ì¶˜ ë’¤ ì¤‘ì‹¬/ìŠ¤ì¼€ì¼ ì´ˆê¸°í™”
      };
      
      viewerImg.src = src;

      // íŒŒì¼ëª… í‘œì‹œ
      try {
        // 1) src ì „ì²´ ì¸ì½”ë”© ë³µì› (í•„ìš”í•  ê²½ìš°)
        let cleanSrc = decodeURIComponent(src);
        // 2) ê²½ë¡œ ì œê±° â†’ íŒŒì¼ëª…ë§Œ ì¶”ì¶œ
        let names = cleanSrc.split('/').pop();   // ë§ˆì§€ë§‰ "/" ë’¤ë§Œ íŒŒì¼ëª…
        // 3) í˜¹ì‹œ '?' íŒŒë¼ë¯¸í„°ê°€ ë¶™ì–´ìˆì„ ë•Œ ëŒ€ë¹„
        names = names.split('?')[0];  

        viewerFilename.textContent = names;
      } catch {
        // í˜¹ì‹œ URL íŒŒì‹±ì´ ì‹¤íŒ¨í•œ ê²½ìš°
        viewerFilename.textContent = src.split('/').pop();
      }

      viewerOverlay.classList.remove("hidden");
      viewerOverlay.classList.add("flex");
    }

    function closeViewer() {
      viewerOverlay.classList.add("hidden");
      viewerOverlay.classList.remove("flex");
      viewerImg.src = "";
    }

    // ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ (ì´ë¯¸ì§€ í´ë¦­ì‹œ)
    function openImage(elOrUrl) {
      // ë¬¸ìì—´ë¡œ ë„˜ì–´ì˜¤ë©´ ê·¸ëŒ€ë¡œ, ìš”ì†Œë¡œ ë„˜ì–´ì˜¤ë©´ data-full/src ì¶”ì¶œ
      const imageUrl = (typeof elOrUrl === "string") ? elOrUrl : (elOrUrl?.getAttribute?.("data-full") || elOrUrl?.src);
      if (!imageUrl) {
          console.error("openImage: imageUrlì´ ë¹„ì–´ìˆìŒ", elOrUrl);
          return;
      }
      openViewer(imageUrl);
    }

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    btnZoomIn.addEventListener("click", () => {
      currentScale = Math.min(currentScale + 0.2, 5);
      applyTransform();
    });

    btnZoomOut.addEventListener("click", () => {
      currentScale = Math.max(currentScale - 0.2, 0.2);
      applyTransform();
    });

    btnZoomReset.addEventListener("click", () => {
      resetTransform();
    });

    btnClose.addEventListener("click", () => {
      closeViewer();
    });

    // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
    viewerOverlay.addEventListener("click", (e) => {
      if (e.target === viewerOverlay) {
        closeViewer();
      }
    });

    // ESC í‚¤ë¡œ ë‹«ê¸°
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !viewerOverlay.classList.contains("hidden")) {
        closeViewer();
      }
    });

    // ë‹¤ìš´ë¡œë“œ
    btnDownload.addEventListener("click", () => {
      const src = viewerImg.src;
      if (!src) return;

      const a = document.createElement("a");
      a.href = src;
      try {
        const url = new URL(src, window.location.href);
        const path = url.pathname;
        const name = path.substring(path.lastIndexOf("/") + 1) || "image";
        a.download = name;
      } catch {
        a.download = "image";
      }
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    });

    // ğŸ–± ë§ˆìš°ìŠ¤ íœ ë¡œ í™•ëŒ€/ì¶•ì†Œ
    viewerFrame.addEventListener("wheel", (e) => {
      e.preventDefault(); // í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë°©ì§€
      const delta = e.deltaY < 0 ? 0.1 : -0.1;
      const newScale = Math.min(Math.max(currentScale + delta, 0.2), 5);
      currentScale = newScale;
      applyTransform();
    }, { passive: false });

    // âœ‹ ë“œë˜ê·¸ë¡œ ì´ë¯¸ì§€ ì´ë™
    viewerFrame.addEventListener("mousedown", (e) => {
      // ì´ë¯¸ì§€ ìœ„ì—ì„œë§Œ ë“œë˜ê·¸ ì‹œì‘ (í”„ë ˆì„ ì—¬ë°± í´ë¦­ ë°©ì§€ ì›í•˜ë©´ ì¡°ê±´ ì¶”ê°€ ê°€ëŠ¥)
      isDragging = true;
      viewerImg.style.cursor = "grabbing";
      dragStartX = e.clientX;
      dragStartY = e.clientY;
      dragOriginX = offsetX;
      dragOriginY = offsetY;
    });

    window.addEventListener("mousemove", (e) => {
      if (!isDragging) return;
      const dx = e.clientX - dragStartX;
      const dy = e.clientY - dragStartY;
      offsetX = dragOriginX + dx;
      offsetY = dragOriginY + dy;
      applyTransform();
    });

    window.addEventListener("mouseup", () => {
      if (!isDragging) return;
      isDragging = false;
      viewerImg.style.cursor = "grab";
    });
    
    function fitViewerToImage() {
      if (!viewerImg.complete || !viewerImg.naturalWidth) return;

      const iw = viewerImg.naturalWidth;
      const ih = viewerImg.naturalHeight;

      // ğŸ”¹ í™”ë©´ì—ì„œ ë¹¼ì¤„ ì—¬ë°±(px)
      const margin = 80;

      // ğŸ”¹ íˆ´ë°” ë†’ì´ë§Œí¼ì€ ë¹¼ê³  ê³„ì‚°
      const toolbar = document.getElementById("viewerToolbar");
      const toolbarH = toolbar ? toolbar.offsetHeight : 0;

      const maxW = window.innerWidth  - margin * 2;
      const maxH = window.innerHeight - toolbarH - margin * 2;

      // í™”ë©´ ì•ˆì— ë“¤ì–´ì˜¤ë„ë¡ ë¹„ìœ¨ ê³„ì‚°
      const ratio = Math.min(1, maxW / iw, maxH / ih);

      const viewW = Math.round(iw * ratio);
      const viewH = Math.round(ih * ratio);

      // ğŸ”¸ í”„ë ˆì„ì„ ì´ë¯¸ì§€ í¬ê¸°ë¡œ ë§ì¶”ê¸°
      viewerFrame.style.width  = viewW + "px";
      viewerFrame.style.height = viewH + "px";

      // ğŸ”¸ ì´ë¯¸ì§€ë¥¼ í”„ë ˆì„ ì•ˆì— ë”± ë§ê²Œ
      viewerImg.style.width  = viewW + "px";
      viewerImg.style.height = viewH + "px";
    }

    // ============================
    // ê¸°ì¡´ iframe ë†’ì´/ìŠ¤í¬ë¡¤ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸
    // ============================
    function sendHeightToParent() {
      const height = document.body.scrollHeight;
      console.log(height);
      window.parent.postMessage({ type: "FRAME_CHANGE", height }, "*");
    }

    // í˜ì´ì§€ ìµœì´ˆ ë¡œë“œ ì‹œ
    window.addEventListener("load", () => {
      setTimeout(sendHeightToParent, 100); // ì•½ê°„ì˜ ë Œë”ë§ ëŒ€ê¸°
    });
    
    // ê° details í† ê¸€ ì‹œ ë†’ì´ ì¬ì „ì†¡
    document.querySelectorAll("details").forEach(detail => {
      detail.addEventListener("toggle", () => {
        // ì•½ê°„ ë”œë ˆì´ í›„ ì •í™•í•œ ë†’ì´ ì¸¡ì •
        setTimeout(sendHeightToParent, 300);
      });
    });
    
    function loadPage(page) {
      const isMobile = window.innerWidth <= 768;
      const height = isMobile ? "550px" : "345px";
      window.location.href = page;
      window.parent.postMessage({ type: "SET_FRAME_SIZE", height: height, width: "100%"}, "*");
    }
    
    document.addEventListener("contextmenu", event => event.preventDefault());
    document.addEventListener("keydown", function (e) {
      if (e.key === "F12" ||
          (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
          (e.ctrlKey && (e.key === "U" || e.key === "S"))) 
      {
        e.preventDefault();
      }
    });

    // ============================
    // ë§¨ ìœ„ë¡œ ë²„íŠ¼
    // ============================
    const scrollToTopBtn = document.getElementById("scrollToTopBtn");

    window.addEventListener("scroll", () => {
      if (window.scrollY > 200) {
        scrollToTopBtn.classList.remove("hidden");
      } else {
        scrollToTopBtn.classList.add("hidden");
      }
    });

    scrollToTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
    
    window.addEventListener("resize", () => {
      if (!viewerOverlay.classList.contains("hidden") && viewerImg.src) {
        fitViewerToImage();
        resetTransform();
      }
    });    
  </script>
  <script>
    window.addEventListener('message', (e) => {
      if (e.data?.type === 'DARK_MODE') {
        document.body.classList.toggle('dark-mode', e.data.value);
      }
    });
  </script>
</body>
</html>
